
--- Page 1 ---

Data Understanding
and pre-processing
Time Series
Anna Monreale and Francesca Naretto
Computer Science Department
Introduction to Data Mining, 2nd Edition
Chapter 1 & Data Exploration (Additional Resources)

--- Page 2 ---

Also for time series: know your data
â€¢ For preparing data for data mining task it is essential
to have an overall understanding of your data
â€¢ Gain insight in your data
â€“ with respect to your project goals
â€“ and general to understand properties
â€¢ Find answers to the questions
â€“ How is the data quality?
â€“ What about outliers?

--- Page 3 ---

Which is the type of data?

--- Page 4 ---

Types of data sets
Time series
A collection of observations that are sequential in
time, generally at constant time intervals.

--- Page 5 ---

Series
A univariate series x is a sequence of values
[ğ‘¥ , ğ‘¥ , â€¦ ğ‘¥_ğ‘›] in a domain X.
1 2
A series is defined by:
â€¢ Type: discrete, e.g., nucleotide bases, or continuous,
e.g., stock values in a financial market
â€¢ Sampling rate: How often values are sampled, e.g.,
daily
â€¢ Amplitude: Values sampled, e.g., value of the stock
on a particular day

--- Page 6 ---

Series
A multivariate time series x is a sequence that
generalizes to multiple variables. Each instance is
comprised of multiple time series, each representing a
different feature.

--- Page 7 ---

TS are ubiquitos
â€¢ You can measure many things â€¦ and things change
over time.
â€“ Blood pressure
â€“ Donald Trumpâ€™s popularity rating
â€“ The annual rainfall in Pisa
â€“ The value of your stocks
â€¢ In addition other data type can be considered as
time series
â€“ Text data: words count
â€“ Images: edges displacement
â€“ Videos: object positioning

--- Page 8 ---

TS are ubiquitos

--- Page 9 ---

Time series characteristics
â€¢ Large amount of data.
â€¢ Similarity is not easy to estimate.
â€¢ Different data formats.
â€¢ Different sampling rates.
â€¢ Noise, missing values, etc.

--- Page 10 ---

Time series understanding
1. Look for trends
2. Check for seasonality, cyclicity, irregularities
3. Look for noise

--- Page 11 ---

Time series statistics
â€¢ Mean: the expected value of the time series
â€¢ Variance: variance of the time series
â€¢ Trends: the slope of a linear model that models the
time series behavior
â€¢ Interquartile ranges: check the distributions
â€¢ Skewness: is the distribution symmetric?
â€¢ Kurtosis: what is the probability mass on the tails?

--- Page 12 ---

Trend
It is a long-term movement of the time series. It is non repeating.
Technically, it is a slope ğ‘‘ğ‘’ğ‘™ğ‘¡ğ‘ of a linear model, modelling the time
series x.

--- Page 13 ---

Seasonality
It is a regular periodic occurrence within a time
interval, usually smaller than a year.

--- Page 14 ---

Cycle
It is a repeated fluctuation long in duration but
not as much as a trend.

--- Page 15 ---

Time series analysis
To analyze and compare different time series,
we first need to pre-process them such that
they have all the same format.
3
2.5
2
1.5
1
0.5
0
0 50 100 150 200 250 300

--- Page 16 ---

Time series analysis
â€¢ Often we need to employ Euclidean distance to
analyze/compare time series. Euclidean distance is
very sensitive to â€œdistortionsâ€ in the data.
â€¢ These distortions are dangerous and should be
removed.
â€¢ Most common distortions:
â€¢ Offset Translation
â€¢ Amplitude Scaling
â€¢ Linear Trend
â€¢ Noise
â€¢ They can be removed by using the appropriate
transformations.

--- Page 17 ---

Offset translation to remove distortions
3 3
2.5 2.5
2 2
1.5 1.5
1 1
0.5 0.5
0 0
0 50 100 150 200 250 300 0 50 100 150 200 250 300
Q = Q - mean(Q)
C = C - mean(C)
D(Q,C)
0 50 100 150 200 250 300
0 50 100 150 200 250 300

--- Page 18 ---

Amplitude scaling
Objective: compare inherent patterns in different TS independently of their magnitudes.
Normalize the amplitude: divide by the standard deviation of the TS.
0 100 200 300 400 500 600 700 800 900 1000
0 100 200 300 400 500 600 700 800 900 1000
Q = (Q - mean(Q)) / std(Q)
C = (C - mean(C)) / std(C)
D(Q,C)

--- Page 19 ---

TS: rolling statistics
The time series may be huge. Analyzing it in its entirety may be
difficult.
A solution is to employ the â€˜rollingâ€™ method, in which the TS is
analyzed extracting a series of consecutive subsequences of
fixed length. Each sub-series gives a different view on TS and its
called window.
Given a window, each locality can now be described.
Examples are: rolling mean, rolling std etc.

--- Page 20 ---

Moving average for noise removal
w=3
time value ma
â€¢ Noise can be removed by a moving
t1 20 -
average (MA) that smooths the TS.
t2 24 22.0
â€¢ Given a window of length w and a TS t,
t3 22 24.0
the MA is applied as follows t4 26 24.3
1 ğ‘¤/2 t5 25 -
â€¢ ğ‘¡ = Ïƒ ğ‘¡ for ğ‘– = 1, â€¦ , ğ‘›
ğ‘– ğ‘—=ğ‘–âˆ’ğ‘¤/2 ğ‘—
ğ‘¤
â€¢ For example, if w=3 we have
1
â€¢ ğ‘¡ = (ğ‘¡ + ğ‘¡ + ğ‘¡ )
ğ‘– ğ‘–âˆ’1 ğ‘– ğ‘–+1
3

--- Page 21 ---

TS: rolling statistics

--- Page 22 ---

TS: sliding statistics
Given a window, we can slide it through the entire TS and
compute some kind of metric on the entire TS.
Similar to the convolution, we apply to the TS a mask sliding
over the entire TS.

--- Page 23 ---

TS: sliding statistics â€“ auto-covariance
How much does a component of a TS correlate with the
previous and future components?
How to: compute the covariance between two components of
the TS using the formula:
High auto-covariance may
indicate seasonality

--- Page 24 ---

TS: why all of these statistics?
Before the application of any statistical model to TS, we need to
analyze and pre-process them so that we can have stationary
data.
Stationary: consistent means, variance and covariance over
time. No trends, seasonality and so on. No predictable patterns.
Obtaining stationary TS may simplify tasks as classification or
forecasting.

--- Page 25 ---

TS: how to know if they are stationary?
1. Apply rolling statistics and see
if there are high covariance (
means presence of trends or
seasonality).
2. In the plot, we can see that
the std is constant but mean
is going up as trend. Hence it
is not stationary

--- Page 26 ---

TS: how to know if they are stationary?
We can conduct statistical tests,
such as the Augmented Dickey-
Fuller test: The test statistic looks
for a unit root: if there is, it
means that the TS is not
stationary.

--- Page 27 ---

TS: how to make them stationary?
We can conduct statistical tests,
such as the Augmented Dickey-
Fuller test: The test statistic looks
for a unit root: if there is, it
means that the TS is not
stationary.

--- Page 28 ---

Linear trend
Removing linear trend: fit the best fitting straight line to the
time series, then subtract that line from the time series.
12 5
10 4
8 3
6 2
4 1
2 0
0 -1
-2 -2
-4 -3
0 20 40 60 80 100 120 140 160 180 200 0 20 40 60 80 100 120 140 160 180 200
Removed linear trend,
offset translation,
amplitude scaling

--- Page 29 ---

Noise removal
The intuition behind removing noise is to average each datapoints value with its
neighbors.
8 8
6 6
Q = smooth(Q)
4 4
C = smooth(C)
2 2
D(Q,C)
0 0
-2 -2
-4 -4
0 20 40 60 80 100 120 140 0 20 40 60 80 100 120 140

--- Page 30 ---

Log transformation
You can apply the natural logarithm or the base 10 logarithm for stabilizing the
variance, for linearizing trends, improve normal distribution.

--- Page 31 ---

Log transformation: pros/cons
1. Data must be positive
2. A little bit more difficult to interpret since the space
of the data is changed, hence the info and pattern
may be more difficult to comprehend
3. Masking not always easy (how to handle zero?)